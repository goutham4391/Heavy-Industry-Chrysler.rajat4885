var WdgtCabBoxModal;!function($){"";"use strict";WdgtCabBoxModal=new function(){var visibleElements,exploreCabBoxModal=null;this.renderExploreCabBox=function(){var getContent=$(".explore-cab-box-content").html();exploreCabBoxModal||((exploreCabBoxModal=new cllc.ui.modal).showButton=!1,$(exploreCabBoxModal.window).addClass("explore-cab-box-model"),exploreCabBoxModal.onclose=function(){_isGreaterThan767()||SNI.events.showFilterModal()}),exploreCabBoxModal.open(getContent),_initSlider(),$(".explore-cab-box-model .cllc-modal-close").off("click").on("click",function(){exploreCabBoxModal.close(),DATALAYER.linkTrack(!1,{lpos:"search-new-inventory:filtering-options",lid:"ram-learn-more-about:overlay:close",linkType:"tool",vars:{eVar5:cllc.context.get("vehicle"),prop1:cllc.context.get("vehicle")}})}),SNI.events.hideFilterModal()};var _initSlider=function(){_initialSetUp()},_initialSetUp=function(){var getSliderContent=$(".cllc-modal-window .slider-content"),visibleAreaWidth="desktop"==SNI.utils.getDeviceType()?940:748;getSliderContent.find("ul li").removeClass("active"),getSliderContent.find("ul li").each(function(){$(this).outerWidth(),$(this).attr("data-element",$(this).index()+1),1<visibleAreaWidth/$(this).outerWidth()&&$(this).addClass("active"),visibleAreaWidth-=$(this).outerWidth()}),getSliderContent.parent().find(".slider-prev").hide(),getSliderContent.parent().find(".slider-next").show(),visibleElements=getSliderContent.find(".active").length,_setNavigation(),_attachEvents()},_attachEvents=function(){var getSliderMain=$(".cllc-modal-window .slider-main");getSliderMain.find(".slider-next").off("click").on("click",function(){_handleNextPrev("next")}),getSliderMain.find(".slider-prev").off("click").on("click",function(){_handleNextPrev("prev")})},_handleNextPrev=function(dir){var getLiCount=$(".explore-cab-box-model .slider-content > ul >li").length,liToMove=0,getLastActive=$(".slider-content li.active").last(),getFirstActive=$(".slider-content li.active").first(),lid="ram-learn-more-about:overlay:carousel-slide:"+$(".slider-nav ul li.carousel-active").attr("data-index");if("next"==dir){var getCurrentObj,nextliCount=Number(getLastActive.attr("data-element"))+Number(visibleElements);getLiCount<nextliCount?(liToMove=visibleElements-(nextliCount-getLiCount),$(".slider-next").hide()):(nextliCount==getLiCount&&$(".slider-next").hide(),liToMove=visibleElements),_setActiveClass(dir,liToMove,getLastActive,getFirstActive),$(".slider-prev").show(),getCurrentObj=$(".slider-nav ul li.carousel-active"),$(".slider-nav ul li").removeClass("carousel-active"),getCurrentObj.next().addClass("carousel-active"),DATALAYER.linkTrack(!1,{lpos:"search-new-inventory:filtering-options",lid:lid+":next",linkType:"tool",vars:{eVar5:cllc.context.get("vehicle"),prop1:cllc.context.get("vehicle")}})}else{var prevliCount=Number(getFirstActive.attr("data-element")-1)-Number(visibleElements);0<prevliCount?liToMove=visibleElements:0==prevliCount?($(".slider-prev").hide(),liToMove=visibleElements):(liToMove=prevliCount,$(".slider-prev").hide()),$(".slider-next").show(),_setActiveClass(dir,liToMove,getLastActive,getFirstActive),getCurrentObj=$(".slider-nav ul li.carousel-active"),$(".slider-nav ul li").removeClass("carousel-active"),getCurrentObj.prev().addClass("carousel-active"),DATALAYER.linkTrack(!1,{lpos:"search-new-inventory:filtering-options",lid:lid+":prev",linkType:"tool",vars:{eVar5:cllc.context.get("vehicle"),prop1:cllc.context.get("vehicle")}})}},_setActiveClass=function(dir,getCount,lastActive,firstActive){var getSliderMain=$(".cllc-modal-window .slider-main"),lastEleIndex=lastActive.attr("data-element"),firstEleIndex=firstActive.attr("data-element");if("next"==dir)if(getCount==visibleElements){lastEleIndex=Number(lastEleIndex)+1,$(".slider-content li").removeClass("active");for(var i=lastEleIndex;i<lastEleIndex+getCount;i++)getSliderMain.find("li[data-element='"+i+"']").addClass("active")}else{lastEleIndex=Number(lastEleIndex)+1,firstActive.removeClass("active").end().nextAll().slice(0,Number(getCount-1)).removeClass("active");for(i=lastEleIndex;i<lastEleIndex+getCount;i++)getSliderMain.find("li[data-element='"+i+"']").addClass("active")}else if(getCount==visibleElements){firstEleIndex=Number(firstEleIndex)-1,$(".slider-content li").removeClass("active");for(i=firstEleIndex;firstEleIndex-getCount<i;i--)getSliderMain.find("li[data-element='"+i+"']").addClass("active")}else{firstEleIndex=Number(firstEleIndex),lastActive.removeClass("active").prevAll().slice(Number(getCount+1)).removeClass("active");for(i=1;i<=firstEleIndex+(getCount+1);i++)getSliderMain.find("li[data-element='"+i+"']").addClass("active")}},_setNavigation=function(){var getSliderMain=$(".cllc-modal-window .slider-main"),getLiLength=getSliderMain.find(".slider-content li").length;if(!(getLiLength<=0)){var navButtonLength=Math.ceil(getLiLength/visibleElements);if(navButtonLength){$(".slider-nav ul").html("");for(var i=1;i<=navButtonLength;i++)$(".slider-nav ul").append("<li class='carousel-nav-btn' data-index='"+i+"'>&nbsp;</li>")}getSliderMain.find(".slider-nav ul li:first").addClass("carousel-active"),_attachEventsNav()}},_attachEventsNav=function(){$(".slider-nav ul li").off("click").on("click",function(e){e.stopPropagation(),$(this).hasClass("carousel-active")||($(".slider-nav ul li").removeClass("carousel-active"),$(this).addClass("carousel-active"),_handleNavClick($(this)))})},_handleNavClick=function(ele){var getClicked=ele,getLis=$(".slider-content ul li"),getClickedIndex=getClicked.attr("data-index"),endIndex=Number(getClickedIndex*visibleElements),startIndex=Number(getClickedIndex*visibleElements-Number(visibleElements)),finalFirstIndex=startIndex;endIndex>Number(getLis.last().attr("data-element"))?(finalFirstIndex=Number(startIndex)-(Number(endIndex)-Number(getLis.last().attr("data-element"))),$(".slider-next").hide(),$(".slider-prev").show()):startIndex<=0?(finalFirstIndex=0,$(".slider-next").show(),$(".slider-prev").hide()):($(".slider-next").show(),$(".slider-prev").show()),getLis.removeClass("active");for(var i=finalFirstIndex+1;i<=getClickedIndex*visibleElements;i++)$(".slider-content ul").find("li[data-element='"+i+"']").addClass("active");var lid="ram-learn-more-about:overlay:carousel-slide:"+$(".slider-nav ul li.carousel-active").attr("data-index");DATALAYER.linkTrack(!1,{lpos:"search-new-inventory:filtering-options",lid:lid,linkType:"tool",vars:{eVar5:cllc.context.get("vehicle"),prop1:cllc.context.get("vehicle")}})},_isGreaterThan767=function(){var _isGreaterThan767=!0;return window.matchMedia&&window.matchMedia("(max-width: 767px)").matches&&(_isGreaterThan767=!1),_isGreaterThan767};(function(){$(document).on("click",".explore-cab-box",this.renderExploreCabBox),this.renderExploreCabBox()}).call(this)}}(jQuery);