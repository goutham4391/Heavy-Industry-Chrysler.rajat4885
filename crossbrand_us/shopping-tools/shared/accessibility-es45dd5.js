"undefined"!=typeof document&&"function"!=typeof Element.prototype.contains&&(Element.prototype.contains=function(el){return this.compareDocumentPosition(el)%16},document.contains=function(el){return document.body.contains(el)});var accessibility={tempFocusElement:null,tabbableSelector:"a[href], area[href], details, iframe, [contentEditable=true], :enabled:not(fieldset), object, embed, [tabindex]",htmlTagRegex:/(<([^>]+)>)/gi,hasSecondaryNavSkipTarget:!1,mainContentSelector:"main, main ~ *, .gcss-page ~ *, .Ecology .Documentation, .Ecology .dummy-content, #mainnavigation, .doc-header",activeSubdocument:null,oldAriaHiddenVal:"data-old-aria-hidden",focusAndScrollToView:function(element){element.focus();var elementRect=element.getBoundingClientRect(),elementOnTop=document.elementFromPoint(elementRect.left,elementRect.top);if(elementOnTop&&elementOnTop!==element){var topElRect=elementOnTop.getBoundingClientRect();window.scrollBy(0,topElRect.top-topElRect.bottom)}},applyFormFocus:function(formElement){var _this=this,options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},firstValid=options.firstValid,isAjaxForm=options.isAjaxForm,e=options.e,isFormInvalid=!1;if(isAjaxForm&&e.preventDefault(),formElement instanceof window.HTMLElement){for(var formFields=formElement.elements,_loop=function(i){var formField=formFields[i];if("FIELDSET"!==formField.nodeName&&(firstValid||"true"===formField.getAttribute("aria-invalid")))return isFormInvalid=!0,document.activeElement===formField?(_this.focusAndScrollToView(formFields[i+1]),setTimeout(function(){formField&&_this.focusAndScrollToView(formField)},500)):_this.focusAndScrollToView(formField),"break"},i=0;i<formFields.length;i+=1){if("break"===_loop(i))break}isFormInvalid||window.requestAnimationFrame(function(){var globalError=formElement.querySelector(".form-error__error-text");globalError&&_this.focusAndScrollToView(globalError)})}return isFormInvalid},refocusCurrentElement:function(callback){var activeElement=document.activeElement;if(!this.tempFocusElement&&document){var elm=document.createElement("div");elm.setAttribute("tabindex","-1"),elm.className="gcss-sr-only",elm.style.cssText="position:fixed;top:0;left:0;",elm.setAttribute("aria-label"," — "),elm.innerHTML=" — ",document.body.appendChild(elm),this.tempFocusElement=elm}this.tempFocusElement&&activeElement&&(this.tempFocusElement.focus(),setTimeout(function(){activeElement&&(activeElement.focus(),callback&&callback())},500))},doIfBlurred:function(e,func){window.requestAnimationFrame(this.doIfBlurredHelper.bind(this,e.currentTarget,e.relatedTarget,func))},doIfBlurredHelper:function(currentTarget,relatedTarget,func){var focusedElement=relatedTarget||document.activeElement;focusedElement.parentNode===document.body||focusedElement===document.body||null===focusedElement||currentTarget.contains(focusedElement)||func()},removeHTML:function(html){return html.replace(this.htmlTagRegex,"")},toLowerCase:function(s){var r="";return s&&(s.toString?r=this.removeHTML(s.toString().toLowerCase()):s.toLowerCase&&(r=this.removeHTML(s.toLowerCase()))),r},setMainContentAriaHidden:function(value){for(var els=document.querySelectorAll(this.mainContentSelector),i=0;i<els.length;i++){var el=els[i];value?el.setAttribute("aria-hidden",value):el.removeAttribute("aria-hidden")}},keepFocusInsideActiveSubdoc:function(blurredEl){var allowableFocusableEls=this.activeSubdocument.querySelectorAll(this.tabbableSelector),firstFocusableElement=allowableFocusableEls[0],lastFocusableElement=allowableFocusableEls[allowableFocusableEls.length-1];blurredEl===firstFocusableElement?lastFocusableElement.focus():firstFocusableElement.focus()},doWhenActiveSubdocIsBlurred:function(blurredEl,func){var activeSubdocument=this.activeSubdocument;activeSubdocument&&window.requestAnimationFrame(function(){var activeElement=document.activeElement;null===activeElement||activeSubdocument.contains(activeElement)||func(blurredEl)})},testIfFocusIsOutside:function(e){var blurredEl=e.target;this.activeSubdocument&&this.doWhenActiveSubdocIsBlurred(blurredEl,this.keepFocusInsideActiveSubdoc.bind(this))},correctFocusFromBrowserChrome:function(e){var activeSubdocument=this.activeSubdocument,tabbableSelector=this.tabbableSelector,activeElement=document.activeElement,relatedTarget=e.relatedTarget;if(activeSubdocument&&null===relatedTarget&&!activeSubdocument.contains(activeElement)){var allowableFocusableEls=activeSubdocument.querySelectorAll(tabbableSelector);if(0<allowableFocusableEls.length)allowableFocusableEls[0].focus()}},setMobileFocusLoop:function(el){var body=document.body,currentEl=el;do{for(var siblings=currentEl.parentNode.childNodes,i=0;i<siblings.length;i++){var sibling=siblings[i];sibling!==currentEl&&sibling.setAttribute&&(sibling.setAttribute(this.oldAriaHiddenVal,sibling.ariaHidden||"null"),sibling.setAttribute("aria-hidden","true"))}currentEl=currentEl.parentNode}while(currentEl!==body)},removeMobileFocusLoop:function(){for(var elsToReset=document.querySelectorAll("["+this.oldAriaHiddenVal+"]"),i=0;i<elsToReset.length;i++){var el=elsToReset[i],ariaHiddenVal=el.getAttribute(this.oldAriaHiddenVal);"null"===ariaHiddenVal?el.removeAttribute("aria-hidden"):el.setAttribute("aria-hidden",ariaHiddenVal),el.removeAttribute(this.oldAriaHiddenVal)}},setKeepFocusInside:function(el,keepFocusInside){var body=document.body;keepFocusInside?(this.activeSubdocument=el,body.addEventListener("blur",this.testIfFocusIsOutside.bind(this),!0),body.addEventListener("focus",this.correctFocusFromBrowserChrome.bind(this),!0),this.setMobileFocusLoop(el)):(this.activeSubdocument=null,body.removeEventListener("blur",this.testIfFocusIsOutside.bind(this),!0),body.removeEventListener("focus",this.correctFocusFromBrowserChrome.bind(this),!0),this.removeMobileFocusLoop(el))}};