!function(f){var e=function(d){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(d)};e.prototype={constructor:e,validators:{notnull:function(d){return 0<d.length},notblank:function(d){return null!==d&&""!==d.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(g){if("object"==typeof g){for(var d in g)if(this.required(g[d]))return!0;return!1}return this.notnull(g)&&this.notblank(g)},type:function(g,d){var h;switch(d){case"number":h=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":h=/^\d+$/;break;case"alphanum":h=/^\w+$/;break;case"email":h=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":g=/(https?|s?ftp|git)/i.test(g)?g:"http://"+g;case"urlstrict":h=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":h=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":h=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return!1}return""!==g&&h.test(g)},regexp:function(g,d,h){return RegExp(d,h.options.regexpFlag||"").test(g)},minlength:function(g,d){return g.length>=d},maxlength:function(g,d){return g.length<=d},rangelength:function(g,d){return this.minlength(g,d[0])&&this.maxlength(g,d[1])},min:function(g,d){return Number(g)>=d},max:function(g,d){return Number(g)<=d},range:function(g,d){return g>=d[0]&&g<=d[1]},equalto:function(g,d,h){return h.options.validateIfUnchanged=!0,g===f(d).val()},remote:function(i,h,p){var k={},j={};k[p.$element.attr("name")]=i,void 0!==p.options.remoteDatatype&&(j={dataType:p.options.remoteDatatype});var d=function(m,g){void 0!==g&&void 0!==p.Validator.messages.remote&&g!==p.Validator.messages.remote&&f(p.ulError+" .remote").remove(),p.updtConstraint({name:"remote",valid:m},g),p.manageValidationResult()},o=function(m){if("object"==typeof m)return m;try{m=f.parseJSON(m)}catch(g){}return m},l=function(g){return"object"==typeof g&&null!==g?void 0!==g.error?g.error:void 0!==g.message?g.message:null:null};return f.ajax(f.extend({},{url:h,data:k,type:p.options.remoteMethod||"GET",success:function(g){g=o(g),d(1===g||!0===g||"object"==typeof g&&null!==g&&void 0!==g.success,l(g))},error:function(g){g=o(g),d(!1,l(g))}},j)),null},mincheck:function(g,d){return this.minlength(g,d)},maxcheck:function(g,d){return this.maxlength(g,d)},rangecheck:function(g,d){return this.rangelength(g,d)}},init:function(g){var d=g.validators;for(var h in g=g.messages,d)this.addValidator(h,d[h]);for(h in g)this.addMessage(h,g[h])},formatMesssage:function(g,d){if("object"==typeof d){for(var h in d)g=this.formatMesssage(g,d[h]);return g}return"string"==typeof g?g.replace(/%s/i,d):""},addValidator:function(g,d){this.validators[g]=d},addMessage:function(h,g,j){if(void 0!==j&&!0===j)this.messages.type[h]=g;else if("type"===h)for(var i in g)this.messages.type[i]=g[i];else this.messages[h]=g}};var c=function(g,d,h){if(this.options=d,this.Validator=new e(d),"ParsleyFieldMultiple"===h)return this;this.init(g,h||"ParsleyField")};c.prototype={constructor:c,init:function(g,d){this.type=d,this.valid=!0,this.element=g,this.validatedOnce=!1,this.$element=f(g),this.val=this.$element.val(),this.isRequired=!1,this.constraints={},void 0===this.isRadioOrCheckbox&&(this.isRadioOrCheckbox=!1,this.hash=this.generateHash(),this.errorClassHandler=this.options.errors.classHandler(g,this.isRadioOrCheckbox)||this.$element),this.ulErrorManagement(),this.bindHtml5Constraints(),this.addConstraints(),this.hasConstraints()&&this.bindValidationEvents()},setParent:function(d){this.$parent=f(d)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&(this.options.required=!0),void 0!==this.$element.attr("type")&&RegExp(this.$element.attr("type"),"i").test("email url number range")&&(this.options.type=this.$element.attr("type"),RegExp(this.options.type,"i").test("number range")&&(this.options.type="number",void 0!==this.$element.attr("min")&&this.$element.attr("min").length&&(this.options.min=this.$element.attr("min")),void 0!==this.$element.attr("max")&&this.$element.attr("max").length&&(this.options.max=this.$element.attr("max")))),"string"==typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length&&(this.options.regexp=this.$element.attr("pattern"))},addConstraints:function(){for(var g in this.options){var d={};d[g]=this.options[g],this.addConstraint(d,!0)}},addConstraint:function(g,d){for(var h in g)h=h.toLowerCase(),"function"==typeof this.Validator.validators[h]&&(this.constraints[h]={name:h,requirements:g[h],valid:null},"required"===h&&(this.isRequired=!0),this.addCustomConstraintMessage(h));void 0===d&&this.bindValidationEvents()},updateConstraint:function(g,d){for(var h in g)this.updtConstraint({name:h,requirements:g[h],valid:null},d)},updtConstraint:function(g,d){this.constraints[g.name]=f.extend(!0,this.constraints[g.name],g),"string"==typeof d&&(this.Validator.messages[g.name]=d),this.bindValidationEvents()},removeConstraint:function(d){d=d.toLowerCase(),delete this.constraints[d],"required"===d&&(this.isRequired=!1),this.hasConstraints()?this.bindValidationEvents():"ParsleyForm"==typeof this.getParent()?this.getParent().removeItem(this.$element):this.destroy()},addCustomConstraintMessage:function(g){var d=g+("type"===g&&void 0!==this.options[g]?this.options[g].charAt(0).toUpperCase()+this.options[g].substr(1):"")+"Message";void 0!==this.options[d]&&this.Validator.addMessage("type"===g?this.options[g]:g,this.options[d],"type"===g)},bindValidationEvents:function(){this.valid=null,this.$element.addClass("parsley-validated"),this.$element.off("."+this.type),this.options.remote&&!/change/i.test(this.options.trigger)&&(this.options.trigger=this.options.trigger?" change":"change");var d=(this.options.trigger?this.options.trigger:"")+(/key/i.test(this.options.trigger)?"":" keyup");this.$element.is("select")&&(d+=/change/i.test(d)?"":" change"),d=d.replace(/^\s+/g,"").replace(/\s+$/g,""),this.$element.on((d+" ").split(" ").join("."+this.type+" "),!1,f.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.data("value")||this.$element.val()},eventValidation:function(g){var d=this.getVal();if("keyup"===g.type&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce||"change"===g.type&&!/change/i.test(this.options.trigger)&&!this.validatedOnce||!this.isRadioOrCheckbox&&d.length<this.options.validationMinlength&&!this.validatedOnce)return!0;this.validate()},isValid:function(){return this.validate(!1)},hasConstraints:function(){for(var d in this.constraints)return!0;return!1},validate:function(g){var h,d=this.getVal();return this.hasConstraints()?this.options.listeners.onFieldValidate(this.element,this)||""===d&&!this.isRequired?(this.reset(),null):this.needsValidation(d)?(h=this.applyValidators(),(void 0!==g?g:this.options.showErrors)&&this.manageValidationResult(),h):this.valid:null},needsValidation:function(d){return!(!this.options.validateIfUnchanged&&null!==this.valid&&this.val===d&&this.validatedOnce)&&(this.val=d,this.validatedOnce=!0)},applyValidators:function(){var d,g=null;for(d in this.constraints){var h=this.Validator.validators[this.constraints[d].name](this.val,this.constraints[d].requirements,this);!1===h?(g=!1,this.constraints[d].valid=g,this.options.listeners.onFieldError(this.element,this.constraints,this)):!0===h&&(g=!(this.constraints[d].valid=!0)!==g,this.options.listeners.onFieldSuccess(this.element,this.constraints,this))}return g},manageValidationResult:function(){var d,g=null;for(d in this.constraints)!1===this.constraints[d].valid?(this.manageError(this.constraints[d]),g=!1):!0===this.constraints[d].valid&&(this.removeError(this.constraints[d].name),g=!1!==g);return this.valid=g,!0===this.valid?(this.removeErrors(),this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass),!0):!1===this.valid?(this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass),!1):g},ulErrorManagement:function(){this.ulError="#"+this.hash,this.ulTemplate=f(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(g){g=this.ulError+" ."+g;var d=this;this.options.animate?f(g).fadeOut(this.options.animateDuration,function(){f(this).remove(),d.ulError&&0===f(d.ulError).children().length&&d.removeErrors()}):f(g).remove(),this.ulError&&0===f(this.ulError).children().length&&this.removeErrors()},addError:function(g){for(var d in g){var h=f(this.options.errors.errorElem).addClass(d);f(this.ulError).append(this.options.animate?f(h).html(g[d]).hide().fadeIn(this.options.animateDuration):f(h).html(g[d]))}},removeErrors:function(){this.options.animate?f(this.ulError).fadeOut(this.options.animateDuration,function(){f(this).remove()}):f(this.ulError).remove()},reset:function(){for(var d in this.valid=null,this.removeErrors(),this.validatedOnce=!1,this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass),this.constraints)this.constraints[d].valid=null;return this},manageError:function(g){if(f(this.ulError).length||this.manageErrorContainer(),!("required"===g.name&&null!==this.getVal()&&0<this.getVal().length||this.isRequired&&"required"!==g.name&&(null===this.getVal()||0===this.getVal().length))){var d=g.name,i=!1!==this.options.errorMessage?"custom-error-message":d,h={};g=!1!==this.options.errorMessage?this.options.errorMessage:"type"===g.name?this.Validator.messages[d][g.requirements]:void 0===this.Validator.messages[d]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[d],g.requirements),f(this.ulError+" ."+i).length||(h[i]=g,this.addError(h))}},manageErrorContainer:function(){var g=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),d=this.options.animate?this.ulTemplate.show():this.ulTemplate;void 0!==g?f(g).append(d):this.isRadioOrCheckbox?this.$element.parent().after(d):this.$element.after(d)},addListener:function(g){for(var d in g)this.options.listeners[d]=g[d]},destroy:function(){this.$element.removeClass("parsley-validated"),this.reset().$element.off("."+this.type).removeData(this.type)}};var a=function(g,d,h){this.initMultiple(g,d),this.inherit(g,d),this.Validator=new e(d),this.init(g,h||"ParsleyFieldMultiple")};a.prototype={constructor:a,initMultiple:function(g,d){this.element=g,this.$element=f(g),this.group=d.group||!1,this.hash=this.getName(),this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]',this.isRadioOrCheckbox=!0,this.isRadio=this.$element.is("input[type=radio]"),this.isCheckbox=this.$element.is("input[type=checkbox]"),this.errorClassHandler=d.errors.classHandler(g,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(h,g){var i,j=new c(h,g,"ParsleyFieldMultiple");for(i in j)void 0===this[i]&&(this[i]=j[i])},getName:function(){if(this.group)return"parsley-"+this.group;if(void 0===this.$element.attr("name"))throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !";return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio)return f(this.siblings+":checked").val()||"";if(this.isCheckbox){var d=[];return f(this.siblings+":checked").each(function(){d.push(f(this).val())}),d}},bindValidationEvents:function(){this.valid=null,this.$element.addClass("parsley-validated"),this.$element.off("."+this.type);var g=this,d=(d=(this.options.trigger?this.options.trigger:"")+(/change/i.test(this.options.trigger)?"":" change")).replace(/^\s+/g,"").replace(/\s+$/g,"");f(this.siblings).each(function(){f(this).on(d.split(" ").join("."+g.type+" "),!1,f.proxy(g.eventValidation,g))})}};var b=function(g,d,h){this.init(g,d,h||"parsleyForm")};b.prototype={constructor:b,init:function(g,d,i){this.type=i,this.items=[],this.$element=f(g),this.options=d;var h=this;this.$element.find(d.inputs).each(function(){h.addItem(this)}),this.$element.on("submit."+this.type,!1,f.proxy(this.validate,this))},addListener:function(g){for(var d in g)if(/Field/.test(d))for(var h=0;h<this.items.length;h++)this.items[h].addListener(g);else this.options.listeners[d]=g[d]},addItem:function(d){if(f(d).is(this.options.excluded))return!1;(d=f(d).parsley(this.options)).setParent(this),this.items.push(d)},removeItem:function(g){g=f(g).parsley();for(var d=0;d<this.items.length;d++)if(this.items[d].hash===g.hash)return this.items[d].destroy(),this.items.splice(d,1),!0;return!1},validate:function(g){var d=!0;this.focusedField=!1;for(var h=0;h<this.items.length;h++)void 0!==this.items[h]&&!1===this.items[h].validate()&&(d=!1,!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus)&&(this.focusedField=this.items[h].$element);return this.focusedField&&!d&&this.focusedField.focus(),this.options.listeners.onFormSubmit(d,g,this),d},isValid:function(){for(var d=0;d<this.items.length;d++)if(!1===this.items[d].isValid())return!1;return!0},removeErrors:function(){for(var d=0;d<this.items.length;d++)this.items[d].parsley("reset")},destroy:function(){for(var d=0;d<this.items.length;d++)this.items[d].destroy();this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var d=0;d<this.items.length;d++)this.items[d].reset()}},f.fn.parsley=function(h,d){function k(n,l){var m=f(n).data(l);if(!m){switch(l){case"parsleyForm":m=new b(n,j,"parsleyForm");break;case"parsleyField":m=new c(n,j,"parsleyField");break;case"parsleyFieldMultiple":m=new a(n,j,"parsleyFieldMultiple");break;default:return}f(n).data(l,m)}return"string"==typeof h&&"function"==typeof m[h]?void 0!==(m=m[h](d))?m:f(n):m}var j=f.extend(!0,{},f.fn.parsley.defaults,void 0!==window.ParsleyConfig?window.ParsleyConfig:{},h,this.data()),i=null;return f(this).is("form")?i=k(f(this),"parsleyForm"):f(this).is(j.inputs)&&!f(this).is(j.excluded)&&(i=k(f(this),f(this).is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"parsleyField")),"function"==typeof d?d():i},f.fn.parsley.Constructor=b,f.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], :disabled",trigger:!1,animate:!0,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:!1,validators:{},showErrors:!0,messages:{},validateIfUnchanged:!1,errors:{classHandler:function(){},container:function(){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(){return!1},onFormSubmit:function(){},onFieldError:function(){},onFieldSuccess:function(){}}},f(window).on("load",function(){f('[data-validate="parsley"]').each(function(){f(this).parsley()})})}(window.jQuery||window.Zepto);