var GCSS=new function(){this.toString=function(){return"[object GCSS]"}};GCSS.CustomDropDown=new function(){var _searchTimeoutId,$=jQuery,_isTouch=!1,_observationType=0,_searchKeys="",_init=function($elements){$elements.each(function(){var selectName=$(this).find("select").attr("name")?$(this).find("select").attr("name"):"",customSelectId=selectName?selectName+"-button":"",labelledFor=selectName?selectName+"-label":"",textLabel="text-"+customSelectId,dropdownLabelText=$(this).find("label").data().ariaLabelText||$(this).find("label").text(),template='<div class="gc-forms-select{2}"><button class="gc-forms-select-label" type="button" aria-labelledby="'+labelledFor+" "+customSelectId+" "+textLabel+'" id="'+customSelectId+'" aria-haspopup="listbox" aria-label="'+dropdownLabelText+'"><span id="'+textLabel+'" aria-label="{3}">{0}</span></button><div class="gc-forms-select-options"><ul role="listbox" aria-labelledby="sortBy-label" tabindex="-1">{1}</ul></div></div>';if($(this).hasClass("gc-forms-dropdown-custom")&&$(this).find(".gc-forms-select").remove(),$(this).addClass("gc-forms-dropdown-custom").find("select").each(function(){if(1==_observationType&&(this.removeEventListener("DOMSubtreeModified",_onSelectSubtreeModified),this.addEventListener("DOMSubtreeModified",_onSelectSubtreeModified),this.attachEvent&&(this.detachEvent("onpropertychange",_onSelectSubtreeModified),this.attachEvent("onpropertychange",_onSelectSubtreeModified))),this.disabled)$(this).parent().append(String.format(template,-1<this.selectedIndex?this[this.selectedIndex].innerHTML:"",""," gc-forms-select-disabled",this[this.selectedIndex].id));else{for(var options="",i=0;i<this.childNodes.length;i++)if("OPTGROUP"==this.childNodes[i].tagName){for(var optgroup="",j=0;j<this.childNodes[i].childNodes.length;j++){"OPTION"==this.childNodes[i].childNodes[j].tagName&&(optgroup+=String.format('<li{1} id="{2}" role="option"><span>{0}</span></li>',this.childNodes[i].childNodes[j].innerHTML,this.childNodes[i].disabled||this.childNodes[i].childNodes[j].disabled?' class="disabled"':"",customSelectId+"-subOption"+this.childNodes[i].childNodes[j].value))}options+=String.format('<li class="optgroup{2}" id="{3}" role="option"><strong>{0}</strong><ul role="listbox">{1}</ul></li>',this.childNodes[i].getAttribute("label"),optgroup,this.childNodes[i].disabled?" disabled":"",customSelectId+"-option"+this.childNodes[i].value)}else"OPTION"==this.childNodes[i].tagName&&(options+=String.format('<li{1} role="option" id="{2}"><span aria-label="{3}">{0}</span></li>',this.childNodes[i].innerHTML,this.childNodes[i].disabled?' class="disabled"':"",customSelectId+"-option"+this.childNodes[i].value,_returnAbbriviationFullForm(this.childNodes[i].innerHTML)));function addDynamicWidth(val,isWidth){var $this=val;if($this.parents(".xb-app-top-content").length){var dynamicWidthDD=$this.parent().find(".gc-forms-select-options").width(),customWidth=isWidth||dynamicWidthDD+"px";$this.parent()[0].style.width=customWidth}}$(this).parent().append(String.format(template,-1<this.selectedIndex?this[this.selectedIndex].innerHTML:"",options,_isTouch?" gc-forms-select-touch":"",-1<this.selectedIndex?_returnAbbriviationFullForm(this[this.selectedIndex].innerHTML):"",customSelectId+"-option"+this.selectedIndex));var _this=$(this);699<$(window).width()&&addDynamicWidth(_this),$(window).on("orientationchange resize",function(){699<$("body").width()?addDynamicWidth(_this):addDynamicWidth(_this,"auto")})}}),!$(this).hasClass("gc-forms-block")){var width=$(this).find(".gc-forms-select-options").width()-($(this).find(".gc-forms-select-label").outerWidth()-$(this).find(".gc-forms-select-label").width())-($(this).find(".gc-forms-select-label span").outerWidth()-$(this).find(".gc-forms-select-label span").width());$(this).find(".gc-forms-select-label span")[0].style.cssText="width: "+width+"px !important"}})},_getIndex=function($dropdown,$li){var index=$li.index();if($dropdown.find(".optgroup")[0]){var optgroup=$li.parents(".optgroup").prev();for(optgroup[0]||(optgroup=$li.prev(),index=0);optgroup[0];)optgroup.find("li")[0]?index+=optgroup.find("li").length:index++,optgroup=optgroup.prev()}return index},_highlight=function($dropdown,index,filter){$dropdown.find("li.highlighted").removeClass("highlighted").removeAttr("aria-selected").removeAttr("aria-current"),-1<index&&(filter?$dropdown.find("li").not(".optgroup, .xdisabled").eq(index).addClass("highlighted").attr("aria-selected","true").attr("aria-current","true"):$dropdown.find("li").eq(index).addClass("highlighted").attr("aria-selected","true").attr("aria-current","true"),console.log(document.activeElement))},_open=function($options){var setFocusOnList,$dropdown=$options.parents(".gc-forms-dropdown");$dropdown.find(".gc-forms-select").addClass("active").find(".gc-forms-select-options").scrollTop(function($dropdown){var select=$dropdown.find("select")[0];return-1<select.selectedIndex?$dropdown.find("li:not(.optgroup)").eq(select.selectedIndex)[0].offsetTop:0}($dropdown)),_highlight($dropdown,$dropdown.find("select")[0].selectedIndex,!0),$options.offset().top+$options.height()-$(window).scrollTop()>$(window).height()&&$options.addClass("align-top"),clearTimeout(setFocusOnList),setFocusOnList=setTimeout(function(){$dropdown.find(".gc-forms-select button").attr("aria-expanded",!0),$dropdown.find(".gc-forms-select-options ul").focus()},500),$(document).on("keydown",{target:$dropdown},_keyboardEvents)},_close=function(){$(".gc-forms-select ul").removeAttr("aria-activedescendant"),$(".gc-forms-select.active").removeClass("active").find(".gc-forms-select-options").removeClass("align-top").find("li.highlighted").removeClass("highlighted"),$(".gc-forms-select").find(".gc-forms-select-label").attr("aria-expanded",!1),$(document).off("keydown",_keyboardEvents)},_returnAbbriviationFullForm=function(str){return str.includes("AWD")?str.replace(/AWD/,"All Wheel Drive"):str.includes("FWD")?str.replace(/FWD/,"Front Wheel Drive"):str.includes("RWD")?str.replace(/RWD/,"Rear Wheel Drive"):""},_selectOption=function($dropdown,index){$dropdown.find(".gc-forms-select-options");var setFocusList,$label=$dropdown.find(".gc-forms-select-label span"),select=$dropdown.find("select")[0];if(select.selectedIndex!=index){select.selectedIndex=index,$label.html(select[select.selectedIndex].innerHTML),$label.attr("aria-label",_returnAbbriviationFullForm(select[select.selectedIndex].innerHTML)),clearTimeout(setFocusList);var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!0),select.dispatchEvent(e),setFocusList=setTimeout(function(){$dropdown.find(".gc-forms-select-label").focus()},20),_close()}},_scrollToView=function($dropdown,$li,direction){var $options=$dropdown.find(".gc-forms-select-options");direction?$li[0].offsetTop-$options.scrollTop()<0&&$options.scrollTop($li[0].offsetTop):$li[0].offsetTop-$options.scrollTop()>=$options.height()&&$options.scrollTop($li[0].offsetTop+$li.height()-$options.height())},_keyboardEvents=function(event){var lastFocusIndex,$dropdown=$(event.data.target);switch(event.which){case 40:case 39:return function($dropdown){var $lis=$dropdown.find("li"),index=$lis.index($lis.filter(".highlighted"))+1,$li=$lis.eq(index);$dropdown.find("ul").attr("aria-activedescendant",$li.attr("id"));var $label=$dropdown.find(".gc-forms-select-label span"),select=$dropdown.find("select")[0];for(0<=index&&index<$lis.length&&$label.html(select[index].innerHTML);$li.hasClass("optgroup")||$li.hasClass("disabled");)index++,$li=$lis.eq(index);$li[0]&&(_highlight($dropdown,index),_scrollToView($dropdown,$li,0))}($dropdown),!1;case 38:case 37:return function($dropdown){var $lis=$dropdown.find("li"),index=$lis.index($lis.filter(".highlighted"))-1,$li=$lis.eq(index);$dropdown.find("ul").attr("aria-activedescendant",$li.attr("id"));var $label=$dropdown.find(".gc-forms-select-label span"),select=$dropdown.find("select")[0];for(0<=index&&index<$lis.length&&$label.html(select[index].innerHTML);$li.hasClass("optgroup")||$li.hasClass("disabled");)index--,$li=$lis.eq(index);0<=index&&(_highlight($dropdown,index),_scrollToView($dropdown,$li,1))}($dropdown),!1;case 33:case 36:return function($dropdown){for(var $lis=$dropdown.find("li"),index=0,$li=$lis.eq(index);$li.hasClass("optgroup")||$li.hasClass("disabled");)index++,$li=$lis.eq(index);$li[0]&&(_highlight($dropdown,index),_scrollToView($dropdown,$li,1))}($dropdown),!1;case 34:case 35:return function($dropdown){for(var $lis=$dropdown.find("li"),index=$lis.length-1,$li=$lis.eq(index);$li.hasClass("optgroup")||$li.hasClass("disabled");)index--,$li=$lis.eq(index);0<=index&&(_highlight($dropdown,index),_scrollToView($dropdown,$li,0))}($dropdown),!1;case 13:lastFocusIndex=-1===_getIndex($dropdown,$dropdown.find("li.highlighted"))?lastFocusIndex:_getIndex($dropdown,$dropdown.find("li.highlighted")),_selectOption($dropdown,lastFocusIndex),_close();break;case 27:_close();break;case 9:return lastFocusIndex=-1===_getIndex($dropdown,$dropdown.find("li.highlighted"))?lastFocusIndex:_getIndex($dropdown,$dropdown.find("li.highlighted")),_selectOption($dropdown,lastFocusIndex),_close(),!1;case 16:case 116:break;default:_search($dropdown,String.fromCharCode(event.which).toLowerCase())}},_search=function($dropdown,key){var found=!1,$options=$dropdown.find("li").not(".optgroup, .disabled");if(window.clearTimeout(_searchTimeoutId),_searchKeys+=key,_searchTimeoutId=window.setTimeout(function(){_searchKeys=""},750),$options.each(function(){if($(this).text().toLowerCase().startsWith(_searchKeys)){var index=_getIndex($dropdown,$(this));_highlight($dropdown,index,!0);var $options=$dropdown.find(".gc-forms-select-options");return this.offsetTop-$options.scrollTop()>=$options.height()?$options.scrollTop(this.offsetTop+$(this).height()-$options.height()):this.offsetTop-$options.scrollTop()<0&&$options.scrollTop(this.offsetTop),!(found=!0)}}),!found&&1<_searchKeys.length){for(var chars=_searchKeys.split(""),moveNext=!0,i=0;i<chars.length;i++)if(chars[0]!=chars[i]){moveNext=!1;break}if(moveNext){var $li,$lis=$dropdown.find("li"),highlightedIndex=$lis.index($lis.filter(".highlighted"));for(found=!1,i=highlightedIndex+1;i<$lis.length;i++)if(!($li=$($lis[i])).hasClass("highlighted")&&!$li.hasClass("disabled")&&$li.text().toLowerCase().startsWith(chars[0])){_highlight($dropdown,i),_scrollToView($dropdown,$li,0),found=!0;break}if(!found)for(i=highlightedIndex=-1;i<$lis.length;i++)if(!($li=$($lis[i])).hasClass("highlighted")&&!$li.hasClass("disabled")&&$li.text().toLowerCase().startsWith(chars[0])){_highlight($dropdown,i),_scrollToView($dropdown,$li,1),found=!0;break}}else{var oldKeys=_searchKeys;_searchKeys="",_search($dropdown,key),_searchKeys=oldKeys}}},_onSelectSubtreeModified=function(event){var select=event.target;select||(select=event.srcElement),"SELECT"!=select.tagName&&(select=$(select).parents("select")[0]),_init($(select).parents(".gc-forms-dropdown"))};if(this.toString=function(){return"[object GCSS.CustomDropDown]"},document.addEventListener){try{document.createEvent("TouchEvent"),_isTouch=!0}catch(ex){}$(document).on("click",".gc-forms-select:not(.gc-forms-select-disabled)",function(){var $options=$(this).find(".gc-forms-select-options");$options.parents(".gc-forms-select").hasClass("active")?_close():(_close(),_open($options))}),$(document).on("keydown",function(event){var $parent=$(event.target).parent();if(40===event.which&&$parent.is(".gc-forms-select:not('.active')")){var $options=$parent.find(".gc-forms-select-options");_open($options)}}),$(document).on("click",function(event){$(event.target).hasClass("gc-forms-select")||$(event.target).parents().hasClass("gc-forms-select")||_close()}),$(document).on("mouseenter",".gc-forms-select li:not(.optgroup, .disabled)",function(event){$(this).parents(".gc-forms-dropdown").find("li").removeClass("highlighted"),$(this).addClass("highlighted")}),$(document).on("click",".gc-forms-select li",function(event){var $li=$(this);if(!$li.hasClass("optgroup")&&!$li.hasClass("disabled")){var $dropdown=$li.parents(".gc-forms-dropdown");_selectOption($dropdown,_getIndex($dropdown,$li))}event.stopPropagation()}),$(document).on("click",".gc-forms-select button",function(event){event.preventDefault()});var _mutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(_mutationObserver)new _mutationObserver(function(mutations){mutations.forEach(function(mutation){$(mutation.addedNodes).each(function(){$(this).hasClass("gc-forms-dropdown")?_init($(this)):$(this).find(".gc-forms-dropdown")[0]?_init($(this).find(".gc-forms-dropdown")):"SELECT"==this.tagName&&$(this).parents(".gc-forms-dropdown")[0]&&_init($(this).parents(".gc-forms-dropdown"))}),("SELECT"==mutation.target.tagName||$(mutation.target).parents("select")[0])&&$(mutation.target).parents(".gc-forms-dropdown")[0]&&_init($(mutation.target).parents(".gc-forms-dropdown"))})}).observe(document,{attributes:!0,childList:!0,subtree:!0});else _observationType=1,document.addEventListener("DOMNodeInserted",function(event){$(event.target).hasClass("gc-forms-dropdown")?_init($(event.target)):$(event.target).find(".gc-forms-dropdown")[0]?_init($(event.target).find(".gc-forms-dropdown")):"SELECT"==event.target.tagName&&$(event.target).parents(".gc-forms-dropdown")[0]&&_init($(event.target).parents(".gc-forms-dropdown"))},!1);_init($(".gc-forms-dropdown"))}void 0===String.format&&(String.format=function(){for(var expression=arguments[0],i=0;i<=arguments.length-1;i++)expression=expression.replace(new RegExp("\\{"+i+"\\}","gm"),arguments[i+1]);return expression})},GCSS.ToggleSwitch=new function(){var $=jQuery,_animate=function($this,$slider,index){$slider.animate({left:index*($slider.parent().outerWidth()-$slider.outerWidth())},300),$this.parent().trigger("change",[index]),$this.siblings().removeAttr("data-selected").attr("aria-selected","false"),$this.attr("data-selected","selected").attr("aria-selected","true")};function handleSwitchToggle(elm){var $this=$(elm);if(selectedIndex=$this.parent()[0].getAttribute("data-selected-index")){var $slider=$this.parent().find(".xb-app-toggle-switch-slider div div");selectedIndex=parseInt(selectedIndex),$this.parent().find("> div:not(.xb-app-toggle-switch-slider)").eq(selectedIndex).attr("data-selected","selected"),$this.parent()[0].removeAttribute("data-selected-index"),$slider.css("left",selectedIndex*($slider.parent().outerWidth()-$slider.outerWidth()))}if($this.parent().find("[data-selected]")[0]||$this.parent().children(":eq(0)").attr("data-selected","selected"),$this.attr("data-selected")||$this.hasClass("xb-app-toggle-switch-slider")){if($this.hasClass("xb-app-toggle-switch-slider")){var x=event.pageX-$this.offset().left,selectedIndex=(index=0,$this.parent().find("[data-selected]").index());$slider=$this.find("div div");x>$this.outerWidth()/2&&(index=1),0<selectedIndex&&(selectedIndex-=1),index!=selectedIndex&&($this=$this.parent().children(":eq("+(1==index?2:0)+")"),_animate($this,$slider,index))}}else{var index=$this.index(),$slider=$this.siblings(".xb-app-toggle-switch-slider").find("div div");0<index&&(index-=1),_animate($this,$slider,index)}}this.toString=function(){return"[object GCSS.ToggleSwitch]"},$(document).on("click",".xb-app-toggle-switch > div",function(event){handleSwitchToggle(this)}),$(document).on("keyup",".xb-app-toggle-switch > div",function(event){13===event.keyCode&&(event.preventDefault(),handleSwitchToggle(this))})};