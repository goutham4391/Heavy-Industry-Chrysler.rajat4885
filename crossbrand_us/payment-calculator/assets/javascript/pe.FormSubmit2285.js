var gaqForm=document.forms.gaq,setIsInputClickTracked=!1;function setFormValues(context){if("undefined"!==context.vehicle&&(gaqForm.elements.vehicle.value=context.year+context.vehicle,gaqForm.elements.vehicle_name.value=Vehicles.getDescription({year:context.year,vehicle:context.vehicle}).replace("<sup>Â®</sup>",""),gaqForm.elements.model.value="",gaqForm.elements.model_name.value=""),"undefined"!==context.model&&(gaqForm.elements.model.value=Vehicles.getTrimDisplay(context),gaqForm.elements.model_name.value=Vehicles.getTrimDisplay(context)),context.vin&&(gaqForm.elements.vin.value=context.vin),context.dealerid&&(gaqForm.elements.dealerId.value=context.dealerid),"sni"===context.callingApp&&(gaqForm.elements.action_name.value="submitgaqsni"),jQuery(".gaq-form-container .form-item input:not(:hidden)").each(function(i,el){PE.isDebug&&console.log("form-item input:not(:hidden)"),jQuery(this).on("blur",function(){jQuery(this).parsley("validate")})}),jQuery(".gaq-st-form").slideDown(),jQuery(".responce-messages").hide(),"undefined"!=typeof channel){var a='<input type="hidden" name="buy_id" value="'+bid+'" />';a+='<input type="hidden" name="site_id" value="'+sid+'" />',a+='<input type="hidden" name="ad_id" value="'+adid+'" />',a+='<input type="hidden" name="rendering_id" value="'+rid+'" />',a+='<input type="hidden" name="placement_id" value="'+pid+'" />',a+='<input type="hidden" name="channel" value="'+channel+'" />',jQuery("form .gaq-form-container #marketdata").html(a)}digitalData.page.pageInfo.zipCode=cllc.context.get("zipcode")}function phoneValidation(){var phoneNumber=jQuery("#phone").val(),checkValid=!(phoneNumber=phoneNumber&&"(___) ___ - ____"!==phoneNumber?phoneNumber.match(/\d/g).join(""):"")||10===phoneNumber.length;return checkValid?$("#form_phone_group .parsley-error-list").hide():$("#form_phone_group .parsley-error-list").show(),checkValid}function _checkInput(e){return(8==e.which||9==e.which||0==e.which||!(e.which<48||57<e.which)||46==e.which||!(e.which<96||105<e.which)||e.which<41&&36<e.which)&&(!(4<e.target.value.length&&8!=e.which&&9!=e.which&&46!=e.which)||e.which<41&&36<e.which)}function handleA11yFormErrors(wrapperEL,element){var errorChild=wrapperEL.siblings(".parsley-custom-error").children("ul");if("zipcode"===element.attr("name")&&errorChild.find("li").first().attr("aria-label",element.attr("data-error-message").replace("ZIP","Zip")),0<errorChild.length){var id=errorChild.attr("id"),attr=element.attr("aria-describedby");attr&&!attr.includes(id)?attr=id+" "+attr:attr||(attr=id),element.attr("aria-describedby",attr)}}function handleInputValidation(wrapperEL,element){"tel"===element.attr("type")&&""===element.val()?(jQuery(element.data("error-container")).empty(),wrapperEL.removeClass("has-error"),wrapperEL.removeClass("label-up")):element.hasClass("parsley-error")?wrapperEL.addClass("has-error"):element.hasClass("parsley-success")&&wrapperEL.addClass("has-success")}function setGAQSubmit(){$("#form_phone_group .parsley-error-list").hide(),$(".gc-forms-textbox-group").on("blur","#phone",function(){phoneValidation()}),jQuery("#gaq_form").on("submit",function(event){event.preventDefault(),"undefined"!=typeof cllc&&void 0!==cllc.context.get().vehicle&&setFormValues(cllc.context.get());var isValid=jQuery("#gaq_form").parsley("validate")&&phoneValidation();if(DATALAYER.linkTrack(!0,{lpos:"content",lid:"get-a-quote-submit",linkType:"tool",vars:{eVar2:"gaq"}}),DATALAYER.set({component:{form:{vehiclesOfInterest:cllc.context.get("vehicle").replace(/_/g,"-")}}}),digitalData.page.pageInfo.vehicleTrim=cllc.context.get("trim").replace(/_/g,"-"),isValid){var queryString=jQuery(this).serialize()+"&callback=?",url="https://"+location.hostname+"/hostb/crossbrand/leadbroker/leadbrokercontroller/jsonLeadProcessor.php?"+queryString;jQuery(".gaq-form-column .image-loader-container").css("visibility","visible");var newZipCode=jQuery('input[name="zipcode"]').val(),gaqForm=document.getElementById("gaq_form");digitalData.page.pageInfo.zipCode=newZipCode,jQuery.getJSON(url,function(response){jQuery(".gaq-st-form").slideUp(),"success"===response.status?(jQuery(".gaq-form-column .image-loader-container").css("visibility","hidden"),jQuery("#success").show(),jQuery("#finance-options").focus(),jQuery("html, body").animate({scrollTop:$(".gaq-form-column").offset().top},500),response.lead_id&&DATALAYER.set({frmLeadId:response.lead_id}),DATALAYER.pageTrack("gaq-complete")):(jQuery(".gaq-form-column .image-loader-container").css("visibility","hidden"),jQuery("#error").show(),accessibility.applyFormFocus(gaqForm))}).fail(function(){jQuery(".gaq-st-form").slideUp(),jQuery(".gaq-form-column .image-loader-container").css("visibility","hidden"),jQuery("#error").show()})}})}gaqForm&&(gaqForm.ref.value=location.href),$("#gaq_form #zipcode").keypress(function(e){return _checkInput(e)}),$("#gaq_form #zipcode").keydown(function(e){return _checkInput(e)}),setGAQSubmit();var labelInsideInputEl=jQuery(".label-inside-wrapper input");labelInsideInputEl.on("focus",function(event){if(event.preventDefault(),jQuery(this).closest(".label-inside-wrapper").addClass("label-up"),!setIsInputClickTracked){var customLid="get-a-quote-"+(jQuery(this).attr("id")?jQuery(this).attr("id").replace("_","-"):"input");setIsInputClickTracked=!0,DATALAYER.linkTrack(!0,{lpos:"content",lid:customLid,linkType:"tool",vars:{eVar2:"gaq"},events:"event2,event23"})}}).on("blur",function(event){event.preventDefault();var el=jQuery(this),wrapper=el.closest(".label-inside-wrapper");""!==el.val()||wrapper.hasClass("always")||wrapper.removeClass("label-up")}),labelInsideInputEl.each(function(){""!==jQuery(this).attr("placeholder")&&jQuery(this).closest(".label-inside-wrapper").hasClass("always")&&jQuery(this).closest(".label-inside-wrapper").addClass("label-up"),"zipcode"===jQuery(this).attr("id")&&""!==jQuery(this).val()&&jQuery(this).closest(".label-inside-wrapper").addClass("label-up")}),jQuery("#gaq_form").parsley({trigger:"blur",listeners:{onFieldValidate:function(el){var wrapperEL=el.parent();handleA11yFormErrors(wrapperEL,el),handleInputValidation(wrapperEL,el)},onFieldError:function(el){var wrapperEl=el.parent();wrapperEl.hasClass("has-success")&&wrapperEl.removeClass("has-success")},onFieldSuccess:function(el){var wraprEl=el.parent();wraprEl.hasClass("has-error")&&wraprEl.removeClass("has-error")}}}),jQuery('.label-inside-wrapper input[data-required="true"]').on("focusout, change, blur",function(){jQuery(this).parsley("validate")});